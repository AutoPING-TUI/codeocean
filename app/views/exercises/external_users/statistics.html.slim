h1 = "#{@exercise} (external user #{@external_user})"
- submissions = Submission.where("user_id = ?  AND exercise_id = ?", @external_user.id, @exercise.id)
- current_submission = submissions.first
- if current_submission
  - initial_files = current_submission.files.to_a

  - all_files = []
  - submissions.each do |submission|
    - all_files.push(submission.files)

  .hidden#data data-submissions=ActiveSupport::JSON.encode(submissions) data-files=ActiveSupport::JSON.encode(all_files)

  - index = 0
  - all_files.each do |files|
    #stats-editor.row
      .files class=(@exercise.hide_file_tree ? 'hidden col-sm-3' : 'col-sm-3') data-index=index data-entries=FileTree.new(files).to_js_tree
      .frames class=(@exercise.hide_file_tree ? 'col-sm-12' : 'col-sm-9')
        - files.each do |file|
          .frame-container
            = render('editor_frame', exercise: @exercise, file: file)
            .hidden.data data-file-id=file.id
    - index += 1

  #slider
    input type='range' orient='horizontal' list='datapoints' min=0 max=submissions.length-1 value=0
    datalist#datapoints
      - index=0
      - submissions.each do |submission|
        option data-submission=submission
          =index
        - index += 1

  #timeline
- else
  p = t('.no_data_available')
